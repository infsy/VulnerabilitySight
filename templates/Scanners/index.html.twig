{# ressources/Menu/index.html.twig #}

{% extends "base.html.twig" %}

{% block title %}
    Vulnerability Sight
{% endblock %}

{% block vuln_body %}

<style type="text/css">
    .title2 {
        color: #696363;
        font-family: sans-serif;
        font-size: 26px;
        font-weight: bold;
        display: block;
        border-bottom: 1px solid;
        border-bottom-color: #837c7c;
        margin-left: 1.5em;
        margin-top: 1.2em;
    }
    .infoform {
        color: black;
        font-family: sans-serif;
        font-size: 14px;
        display: block;
        margin-left: 2.6em;
        margin-top: 1em;
        width: 80%;
        float: top;
    }
    .tabledisplay {
        color: #514d4d;
        display: block;
        margin-left: 2.6em;
        margin-top: 1em;
        width: 95%;
        float: bottom;
    }
</style>

<h1 class="title2">
    Manage scanners
</h1>
<div class="infoform">
    <!-- Add new scanner to database -->
    <form action="" method="get" enctype="text/plain">
        <div>
            Scan name: <input type="text" name="scanname"> Server: <input type="text" name="server"> Username: <input type="text" name="username"> Password: <input type="password" name="password">
            <input type="submit" value="Add" style="width: 7em; margin-right: 10px;">
        </div>
    </form>
    <br>
    <!-- Delete existing scanner from database -->
    <form action="" method="get" enctype="text/plain">
        <div>
            List:
            <select id="deletelist" name="deletelist">
                {% for scanner in scanners %}
                    <option value="{{scanner.id}}">{{ scanner.name }}</option>
                {% endfor %}
            </select>
            <input type="submit" value="Delete" style="width: 7em; margin-right: 10px;">
        </div>
    </form>
</div>
<div class="tabledisplay">
    <table id="listScanners" class="display nowrap" cellspacing="0" width="100%">
        <thead>
        <tr>
            <th>Name</th>
            <th>Server</th>
            <th>Username</th>
            <th>Password</th>
        </tr>
        </thead>
        <tbody>
        <!--dÃ©but de la boucle-->
        {% for scanner in scanners %}
            <tr>
                {# Tableau #}
                <td>{{scanner.name}}</td>
                <td>{{scanner.server}}</td>
                <td>{{scanner.login}}</td>
                <td><button id="btn{{scanner.id}}" style="width: 4em; text-align: center;" onclick="revealPass({{scanner.id}})">Show</button><span id="pw{{scanner.id}}" style="display: none; margin-left: 1em;">{{scanner.password}}</span></td>
            </tr>
            <!--fin de la boucle-->
        {% endfor %}

        </tbody>
    </table>
</div>
<script>
    function revealPass(id) {
        var pw = "pw" + id;
        var btn = "btn" + id;
        var x = document.getElementById(pw);
        var y = document.getElementById(btn);
        if (x.style.display === "none") {
            x.style.display = "inline-block";
            y.innerHTML = "Hide";
        } else {
            x.style.display = "none";
            y.innerHTML = "Show";
        }
    }
</script>
{% endblock %}
