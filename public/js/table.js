$(document).ready(function () {



    //on initialise le tableau
    var tableAffectation = $('#listAffectation').DataTable({
        responsive: true,
        "language": {
            "url": "//cdn.datatables.net/plug-ins/1.10.11/i18n/French.json"
        },
        "lengthMenu": [50, 100, 500, 1000],
        "pageLength": 500,
        "order": [4, 'asc'],
        //"oSearch": {"sSearch": "VPTS"},
        //"drawCallback": function( settings ) {
        //    $("#" + settings.sTableId+"_filter input").val("VPTS");
        //}
        //            var that = this;
        //
        //            if (that.search() !== this.value) {
        //        that
        //            .search(this.value)
        //            .draw();
        //    }
        //},
        "columnDefs": [
            {
                className: "all table-center", "targets": [-1]//derniere et avant dernière colonnes toujours affichée et centrées
            },
            {
                className: "all", "targets": [0]
            },
            {
                className: "all", "targets": [-2]
            },
            {"orderable": false, "targets": [-1, -2]}
        ]
    });


    // Pour la recherche par colonne
    tableAffectation.columns().every(function () {
        var that = this;

        $('input', this.header()).on('keyup change', function () {
            if (that.search() !== this.value) {
                that
                    .search(this.value)
                    .draw();
            }
        });
    });

    //$('input', this.header()).trigger('keyup change');

    $('#listVulnerabilityDetected').DataTable({
        responsive: true,
        "language": {
            "url": "//cdn.datatables.net/plug-ins/1.10.11/i18n/French.json"
        },
        "pageLength": 50,
        "order": [2, 'asc'],
        "columnDefs": [
            {
                className: "all table-center", "targets": [-1]//derniere et avant dernière colonnes toujours affichée et centrées
            },
            {
                className: "all", "targets": [0]
            },
            {"orderable": false, "targets": [-1]}
        ]
    });


    $('#listDetection').DataTable({
        responsive: true,
        "language": {
            "url": "//cdn.datatables.net/plug-ins/1.10.11/i18n/French.json"
        },
        "pageLength": 50,
        "order": [2, 'asc'],
        "columnDefs": [
            {
                className: "all table-center", "targets": [-1]//derniere et avant dernière colonnes toujours affichée et centrées
            },
            {
                className: "all", "targets": [0]
            },
            {"orderable": false, "targets": [-1]}
        ]
    });


    $('#listDetectionDetail').DataTable({
        responsive: true,
	    "autoWidth": false,
        "language": {
            "url": "//cdn.datatables.net/plug-ins/1.10.11/i18n/French.json"
        },
        "pageLength": 50,
        "order": [4, 'desc'],
        "columnDefs": [
            {
                className: "all table-center", "targets": [-1,-2,-3]// Actions, status, cvss => centered
            },
            /*{
                className: "all table-indent-small", "targets": [2]
            },*/
            {
                className: "all", "targets": [0]
            },
            {
                "width": "50%", "targets": 0
            },
            {
                "width": "10%", "targets": [2]
            },
            {
                "width": "6%", "targets": [-3]
            },
            {"orderable": false, "targets": [-1]}
        ]
    });
});
